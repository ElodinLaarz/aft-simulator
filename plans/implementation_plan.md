# Implementation Plan - Go-RIB/FIB Telemetry Streamer

- [x] **Phase 1: Project Initialization & Data Modeling**
    - [x] Initialize Go module (`go mod init github.com/openconfig/aft-simulator`)
    - [x] Create directory structure (`cmd/daemon`, `pkg/api`, `pkg/rib`, `pkg/fib`, `pkg/telemetry`, `pkg/installers`)
    - [x] Define core data structures in `pkg/api` (`RIBUpdate`, `FIBUpdate`, `AFTUpdate`) and `RouteInstaller` interface.
- [x] **Phase 2: RIB Manager Implementation**
    - [x] Implement `pkg/rib` package with `RIB` struct and `New()` constructor.
    - [x] Implement `AddRoute` and `DeleteRoute` logic with Best Path Selection (Admin Distance < Metric).
    - [x] Implement the main event loop to process `RIBUpdate` and emit `FIBUpdate`.
    - [x] Add unit tests for RIB logic.
- [x] **Phase 3: FIB Manager Implementation**
    - [x] Implement `pkg/fib` package with `FIB` struct and `New()` constructor.
    - [x] Implement `Update` logic to maintain `ActiveRoutes` map.
    - [x] Implement `GetSnapshot()` for initial state retrieval.
    - [x] Implement the main event loop to process `FIBUpdate` and emit `AFTUpdate`.
    - [x] Add unit tests for FIB logic.
- [x] **Phase 4: gNMI Telemetry Server**
    - [x] Implement `pkg/telemetry` package with `GNMIServer` struct.
    - [x] Implement `Subscribe` RPC handling `STREAM` mode (Snapshot + Updates).
    - [x] Implement helper to convert `AFTUpdate` to `gnmi.Notification`.
- [x] **Phase 5: Integration & Mocking**
    - [x] Create `pkg/installers/mock` with a mock `RouteInstaller`.
    - [x] Implement `cmd/daemon/main.go` to wire everything together.
    - [x] Verify end-to-end functionality.
- [x] **Phase 6: High-Scale Configuration (New)**
    - [x] Implement `pkg/config` for JSON configuration loading.
    - [x] Update `MockInstaller` to support high-scale route generation and configurable churn.
    - [x] Update `cmd/daemon` to use the configuration file.
